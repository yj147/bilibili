# PRD: Bilibili 自动化管理工具

## 1. 项目概述

一个集中式、多账号的 Web 管理平台，专注于 Bilibili 内容审核（举报）和自动化用户互动（私信自动回复）。

**项目代号**: Bili-Sentinel  
**目标发布**: v1.0 MVP

---

## 2. 目标用户

| 用户类型 | 描述 |
|---------|------|
| 个人创作者/UP主 | 管理多个小号进行内容维护 |
| 社区管理团队 | 专业化的评论区管理和用户举报 |
| 反黑粉工作室 | 批量处理恶意用户和内容 |

---

## 3. 核心功能模块

### 3.1 账号管理

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 多账号凭证存储 | 支持 SESSDATA、bili_jct、buvid3 | P0 |
| 账号健康检查 | 自动验证 Cookie 有效性和 WBI 密钥状态 | P0 |
| 账号分组标签 | 按用途分类（如：举报组、回复组） | P1 |
| 账号导入/导出 | 支持 JSON 格式批量导入导出 | P1 |

### 3.2 目标列表管理

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 黑名单数据库 | 持久化存储目标 BV/UID/评论ID | P0 |
| 批量导入 | 支持 CSV/TXT 格式导入 BV号、UID | P0 |
| 批量导出 | 导出当前目标列表及处理状态 | P1 |
| 目标状态追踪 | 记录每个目标的处理进度（待处理/进行中/已完成/失败） | P0 |

### 3.3 内容审核（举报）

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 视频举报 | 通过 BV/AV 号举报视频内容 | P0 |
| 评论举报 | 举报视频/动态下的特定评论 | P0 |
| 用户空间举报 | 举报用户主页（头像/昵称/简介违规） | P0 |
| 评论区扫描 | 自动获取指定视频的评论并批量举报 | P1 |
| 举报理由配置 | 预设下拉菜单 + 自定义文本输入 | P0 |
| 多账号轮询执行 | 使用账号池分散举报，含随机延迟 | P0 |

**预设举报理由：**
- 视频：广告、色情、低俗、侵权、虚假信息、其他
- 评论：垃圾广告、人身攻击、引战、色情、其他
- 用户：内容违规、头像/昵称违规、垃圾账号

### 3.4 自动互动（私信回复）

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 私信轮询 | 定时拉取所有账号的新私信 | P0 |
| 关键词匹配回复 | 关键词 → 回复内容 映射表 | P0 |
| 默认回复模板 | 未匹配关键词时的兜底回复 | P0 |
| 回复日志 | 记录每条回复的发送时间和接收者 | P1 |

### 3.5 定时任务调度

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 周期性举报任务 | 设置间隔时间自动执行举报队列 | P1 |
| Cron 表达式支持 | 高级用户可使用 Cron 语法定义调度 | P2 |
| 任务暂停/恢复 | 手动控制调度任务的运行状态 | P1 |
| 执行历史 | 记录每次调度执行的时间和结果 | P1 |

### 3.6 控制中心（Web UI）

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 仪表盘概览 | 账号数、待处理任务数、今日执行统计 | P0 |
| 实时日志流 | WebSocket 推送执行日志 | P0 |
| 详细日志记录 | 完整 API Response 可展开查看 | P1 |
| 任务队列管理 | 查看、重试、取消排队中的任务 | P0 |
| 配置面板 | 可视化编辑回复关键词、举报理由等 | P0 |

---

## 4. 非功能需求

| 需求 | 描述 |
|------|------|
| 低检测风险 | User-Agent 轮换、随机延迟（2-10秒）、WBI 签名 |
| 高性能 | 异步后端（FastAPI + httpx），支持并发轮询 |
| 数据持久化 | SQLite 本地数据库存储账号、目标、日志 |
| 响应式设计 | 适配桌面和平板浏览器 |
| 视觉风格 | 深色模式、玻璃拟态（Glassmorphism）、流畅动画 |

---

## 5. 技术架构概要

```
┌─────────────────────────────────────────────────────────┐
│                    Next.js Frontend                      │
│        (shadcn/ui + framer-motion + Tailwind)           │
└─────────────────────────┬───────────────────────────────┘
                          │ HTTP/WebSocket
┌─────────────────────────▼───────────────────────────────┐
│                    FastAPI Backend                       │
│              (API Bridge + Task Scheduler)               │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────┐
│                   Python Core Engine                     │
│   BilibiliClient / ReportingManager / AutoReplyService  │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────┐
│                    Bilibili API                          │
└─────────────────────────────────────────────────────────┘
```

---

## 6. 成功指标

| 指标 | 目标值 |
|------|--------|
| 批量举报成功率 | ≥ 90% |
| 私信自动回复延迟 | < 60 秒 |
| 账号存活率 | 连续运行 24 小时无 Cookie 失效 |
| 系统可用性 | 99% 正常运行时间 |

---

## 7. 后续迭代（v1.1+）

- [ ] 多语言支持（中/英）
- [ ] 举报结果追踪（检查目标是否被处理）
- [ ] Telegram/Discord 通知集成
- [ ] Docker 一键部署
